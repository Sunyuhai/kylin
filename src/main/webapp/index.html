<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>子网划分实现</title>
        <link rel="stylesheet" type="text/css" href="css/common.css">
        <link rel="stylesheet" href="css/register.css">
		<!--导入jquery-->
		<script src="js/jquery-3.3.1.js"></script>
		<style>
			.rg_form_center{
				margin-left: 100px;
			}
			.sunyuhai{
				width: 600px;
				border:2px solid #3c3c3c;
				padding:5px 5px;
				box-shadow:5px 3px 3px 3px #5e5e5e;
				color: #2aabd2;
				position: relative;
				top:60px;
				left:-60%;
				font-size:20px;
			}
			.kylin{
				position: relative;
				top:250px;
				left:140px;
				border:2px solid #3c3c3c;
				padding:5px 5px;
				box-shadow:5px 3px 3px 3px #5e5e5e;
				color: rgba(242, 58, 203, 0.96);
				font-size:20px;
			}

		</style>
		<script>
			function checkUsername(){
				const s = $("#username").val();
				const check = /^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/;
				const flag = check.test(s);
				if(flag){
					$("#username").css("border","");
				}else{
					$("#username").css("border","1px solid red");
				}
				return flag;
			}
			// 单词字符，8-12
			function checkPassword(){
				const s = $("#password").val();
				const check = /^(254|252|248|240|224|192|128|0)\.0\.0\.0|255\.(254|252|248|240|224|192|128|0)\.0\.0|255\.255\.(254|252|248|240|224|192|128|0)\.0|255\.255\.255\.(254|252|248|240|224|192|128|0)$/;
				const flag = check.test(s);
				if(flag){
					$("#password").css("border","");
				}else{
					$("#password").css("border","1px solid red");
				}
				return flag;
			}
			$(function () {
				$("#registerForm").submit(function () {
					if(checkPassword() && checkUsername()){
						//serialize()函数将表单中的数据自动封装转化为键值对的形式
						$.post("user/register",$(this).serialize(),function (data) {
							if(data.flag){
								$("#liebie").html(data.liebie);
								$("#ziwangshu").html(data.ziwangshu);
								$("#youxiaoziwang").html(data.youxiaoziwang);
								$("#zhujishu").html(data.zhujishu);
								$("#ziwangIP").html(data.ziwangIP);
								$("#guangpodizhi").html(data.guangpodizhi);
							}
						});
					}
					return false;
				});
				$("#username").blur(checkUsername);
				$("#password").blur(checkPassword);
			});
		</script>
    </head>
	<body>
	<!--引入头部-->
	<div id="header"></div>
        <!-- 头部 end -->
    	<div class="rg_layout">
    		<div class="rg_form clearfix">
    			<div class="rg_form_left">
					<p>欢迎来到子网划分程序</p>
    				<p>Welcome to the subnet partitioning program</p>
    			</div>
    			<div class="rg_form_center">
					<!--输入表单-->
    				<form id="registerForm">
						<!--提交处理请求的标识符-->
						<input type="hidden" name="action" value="register">
    					<table style="margin-top: 25px;">
    						<tr>
    							<td class="td_left">
    								<label for="username">网络地址</label>
    							</td>
    							<td class="td_right">
    								<input type="text" id="username" name="username" placeholder="请输入合法的网络地址">
    							</td>
    						</tr>
    						<tr>
    							<td class="td_left">
    								<label for="password">子网掩码</label>
    							</td>
    							<td class="td_right">
    								<input type="text" id="password" name="password" placeholder="请输入合法的子网掩码">
    							</td>
    						</tr>
    						<tr>
    							<td class="td_left"> 
    							</td>
    							<td class="td_right check"> 
    								<input type="submit" class="submit" value="提交">
									<span id="msg" style="color: red;"></span>
    							</td>
    						</tr>
    					</table>
    				</form>
					<div class="sunyuhai">
						<div id="liebie" class="alert alert-danger" ></div>
						<div id="ziwangshu" class="alert alert-danger" ></div>
						<div id="youxiaoziwang" class="alert alert-danger" ></div>
						<div id="zhujishu" class="alert alert-danger" ></div>
						<div id="ziwangIP" class="alert alert-danger" ></div>
						<div id="guangpodizhi" class="alert alert-danger" ></div>
					</div>
					<div class="kylin">
						<p>班级：18计科一班</p> <br>
						<p>学号：1867111106</p> <br>
						<p>姓名：孙玉海</p> <br>
						<p>指导教师：赵宇红</p> <br>
					</div>
    			</div>
    		</div>
    	</div>
        <!--引入尾部-->
    	<div id="footer"></div>
		<!--导入布局js，共享header和footer-->
		<script type="text/javascript" src="js/include.js"></script>
    	
    </body>
</html>